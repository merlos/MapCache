<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MapCache  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="MapCache  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">MapCache 0.10.0 Docs</a> (100% documented)</p>
        <p class="header-right"><a href="https://github.com/merlos/MapCache"><img src="img/gh.png" alt="GitHub"/>View on GitHub</a></p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">MapCache Reference</a>
        <img id="carat" src="img/carat.png" alt=""/>
        MapCache  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/CachedTileOverlay.html">CachedTileOverlay</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CachedTileOverlayRenderer.html">CachedTileOverlayRenderer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DiskCache.html">DiskCache</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/HashBase.html">HashBase</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MD5.html">MD5</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MapCache.html">MapCache</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/RegionDownloader.html">RegionDownloader</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TileCoords.html">TileCoords</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TileCoordsRegion.html">TileCoordsRegion</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/LatitudeError.html">LatitudeError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/LoadTileMode.html">LoadTileMode</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/LongitudeError.html">LongitudeError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TileError.html">TileError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TileRangeError.html">TileRangeError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZoomError.html">ZoomError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/FileManager.html">FileManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Int.html">Int</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/MKMapView.html">MKMapView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/MKTileOverlayPath.html">MKTileOverlayPath</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/MKZoomScale.html">MKZoomScale</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/NSMutableData.html">NSMutableData</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/URL.html">URL</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:8MapCache1loiySbSo8NSNumberC_ADtF">&lt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:8MapCache12arrayOfBytes5value6lengthSays5UInt8VGx_SiSgtlF">arrayOfBytes(value:length:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:8MapCache17isNoSuchFileError33_FC193A7AE40E49CC84DE49A3128B2975LLySbs0G0_pSgF">isNoSuchFileError(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:8MapCache10rotateLeft1v1ns6UInt32VAF_AFtF">rotateLeft(v:n:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:8MapCache18sliceToUInt32ArrayySays0E0VGs0F5SliceVys5UInt8VGF">sliceToUInt32Array(_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/MapCacheProtocol.html">MapCacheProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/RegionDownloaderDelegate.html">RegionDownloaderDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/BytesSequence.html">BytesSequence</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Log.html">Log</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Log/Level.html">– Level</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapCacheConfig.html">MapCacheConfig</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TileRange.html">TileRange</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TileRangeIterator.html">TileRangeIterator</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ZoomRange.html">ZoomRange</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ZoomRangeIterator.html">ZoomRangeIterator</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ZoomableTile.html">ZoomableTile</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:8MapCache10TileNumbera">TileNumber</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:8MapCache4Zooma">Zoom</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='mapcache-swift' class='heading'>MapCache Swift</h1>

<p><div style="text-align:center"><img src="https://github.com/merlos/MapCache/raw/master/images/MapCache.png"></div>
</p>

<p><a href="https://travis-ci.org/github/merlos/MapCache"><img src="https://travis-ci.com/merlos/MapCache.svg?branch=master" alt="CI Status"></a>
<a href="https://cocoapods.org/pods/MapCache"><img src="https://img.shields.io/cocoapods/v/MapCache.svg?style=flat" alt="Version"></a>
<a href="https://cocoapods.org/pods/MapCache"><img src="https://img.shields.io/cocoapods/l/MapCache.svg?style=flat" alt="License"></a>
<a href="https://cocoapods.org/pods/MapCache"><img src="https://img.shields.io/cocoapods/p/MapCache.svg?style=flat" alt="Platform"></a>
<a href="http://merlos.org/MapCache"><img src="https://www.merlos.org/MapCache/badge.svg" alt="Documentation"></a>
<img src="https://github.com/merlos/MapCache/workflows/Swift/badge.svg" alt="Swift"></p>

<p>The missing part of <a href="https://developer.apple.com/documentation/mapkit">MapKit</a>: A simple way to cache <a href="https://en.wikipedia.org/wiki/Tiled_web_map">map tiles</a> and support offline browsing of maps.</p>

<p>Current features:</p>

<ul>
<li>Automatically save tiles in a disk cache as user browses the map.</li>
<li>Generation of interpolated tiles beyond maximum server zoom level (<code>{z}</code>)</li>
<li>Cache capacity. Once the cache is full it will use a LRU (Least Recently Used) algorithm.</li>
<li>Get Current cache size</li>
<li>Clear existing cache</li>
<li>Download a full region of the map (experimental)</li>
<li>Available <a href="http://www.merlos.org/MapCache">reference documentation</a></li>
</ul>

<p>What is coming:</p>

<ul>
<li>Smart predownloading/caching: anticipate tiles that may be needed during network idle</li>
<li>Background cache updates downloads</li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>

<p>MapCache is available through <a href="https://cocoapods.org">CocoaPods</a>. To install it, simply add the following line to your <code>Podfile</code>:</p>
<pre class="highlight ruby"><code><span class="c1">#Podfile</span>
<span class="n">pod</span> <span class="s1">'MapCache'</span>
</code></pre>

<p>Then in the folder where you have the <code>Podfile</code> run the command </p>
<pre class="highlight shell"><code>pod <span class="nb">install</span>
</code></pre>
<h2 id='how-to-use-mapcache' class='heading'>How to use MapCache?</h2>

<p>In the view controller where you have a <code>MKMapView</code>, import <code><a href="Classes/MapCache.html">MapCache</a></code>:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">MapCache</span>
</code></pre>

<p>Then, within the ViewController add:</p>
<pre class="highlight swift"><code><span class="c1">// ViewController.swift</span>
<span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>
  <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">map</span><span class="p">:</span> <span class="kt">MKMapView</span><span class="o">!</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>

    <span class="c1">//...</span>

    <span class="n">map</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>

    <span class="c1">//...</span>

    <span class="c1">// First setup the config of our cache. </span>
    <span class="c1">// The only thing we must provide is the url template of the tile server.</span>
    <span class="c1">// (All other config options are explained below in the section MapCache Configuration)</span>
    <span class="k">let</span> <span class="nv">config</span> <span class="o">=</span> <span class="kt">MapCacheConfig</span><span class="p">(</span><span class="nv">withUrlTemplate</span><span class="p">:</span> <span class="s">"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"</span><span class="p">)</span>

    <span class="c1">// initialize the cache with our config</span>
    <span class="k">let</span> <span class="nv">mapCache</span> <span class="o">=</span> <span class="kt">MapCache</span><span class="p">(</span><span class="nv">withConfig</span><span class="p">:</span> <span class="n">config</span><span class="p">)</span>

    <span class="c1">// We tell the MKMapView to use the cache</span>
    <span class="c1">// So whenever it requires a tile, it will be requested to the </span>
    <span class="c1">// cache </span>
    <span class="n">map</span><span class="o">.</span><span class="nf">useCache</span><span class="p">(</span><span class="n">mapCache</span><span class="p">)</span>

    <span class="c1">//...</span>
<span class="p">}</span>
</code></pre>

<p>Finally, tell the map delegate to use <code>mapCacheRenderer</code>:</p>
<pre class="highlight swift"><code><span class="c1">//ViewController.swift</span>

<span class="c1">// Assuming that ViewController is the delegate of the map</span>
<span class="c1">// add this extension:</span>
<span class="kd">extension</span> <span class="kt">ViewController</span> <span class="p">:</span> <span class="kt">MKMapViewDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">mapView</span><span class="p">(</span><span class="n">_</span> <span class="nv">mapView</span><span class="p">:</span> <span class="kt">MKMapView</span><span class="p">,</span> <span class="n">rendererFor</span> <span class="nv">overlay</span><span class="p">:</span> <span class="kt">MKOverlay</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">MKOverlayRenderer</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">mapView</span><span class="o">.</span><span class="nf">mapCacheRenderer</span><span class="p">(</span><span class="nv">forOverlay</span><span class="p">:</span> <span class="n">overlay</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p>After setting up the map cache, browsed areas of the map will be kept on disk. If the user browses again, that area it will use the local version.</p>

<p>Note that in the current version, the cache does not support expiration dates, so if you need to get an updated version of the tiles you must call <code>clear()</code> which will wipe out the whole cache.</p>
<pre class="highlight swift"><code><span class="n">mapCache</span><span class="o">.</span><span class="nf">clear</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// do something after clear</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"cache cleared!"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>To get current cache size:</p>
<pre class="highlight swift"><code><span class="n">mapCache</span><span class="o">.</span><span class="nf">calculateDiskSize</span><span class="p">()</span>
</code></pre>

<p>You can take a look at the <a href="https://github.com/merlos/MapCache/tree/master/Example/MapCache"><strong>Example/ folder</strong></a> to see a complete implementation.</p>

<p><a href="http://www.merlos.org/MapCache">Reference documentation</a> is also available.</p>
<h2 id='mapcache-configuration' class='heading'>MapCache configuration</h2>

<p>Configurating the map cache is pretty straight forward. Typically, you will only need to set <code>urlTemplate</code> and, optionally, the <code>subdomains</code>.</p>

<p>These are the options:</p>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">config</span> <span class="o">=</span> <span class="kt">MapCacheConfig</span><span class="p">()</span>

<span class="c1">// Set the URL template.</span>
<span class="c1">// For Open Street Maps you can chose: https://wiki.openstreetmap.org/wiki/Tile_servers</span>
<span class="c1">// It defaults to OpenStreetMaps servers</span>
<span class="c1">//</span>
<span class="c1">// Below we set cartoDB Base map server (https://github.com/CartoDB/cartodb/wiki/BaseMaps-available)</span>
<span class="n">config</span><span class="o">.</span><span class="nv">urlTemplate</span><span class="p">:</span> <span class="s">"https://${s}.basemaps.cartocdn.com/base-light/${z}/${x}/${y}.png"</span>


<span class="c1">// In the urlTemplate ${s} stands for subdomains, which allows you to balance</span>
<span class="c1">// the load among the</span>
<span class="c1">// different tile servers.</span>
<span class="c1">// Default value is ["a","b","c"].</span>
<span class="n">config</span><span class="o">.</span><span class="n">subdomains</span> <span class="o">=</span> <span class="p">[</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"b"</span><span class="p">]</span>


<span class="c1">// Cache Name is basically is the subfolder name in which the tiles are store.</span>
<span class="c1">// Default value is "MapCache"</span>
<span class="n">config</span><span class="o">.</span><span class="n">cacheName</span> <span class="o">=</span> <span class="s">"Carto"</span>


<span class="c1">// Max zoom supported by the tile server</span>
<span class="c1">// Default value is 19</span>
<span class="n">config</span><span class="o">.</span><span class="n">maximumZ</span> <span class="o">=</span> <span class="mi">21</span>

<span class="c1">// Minimum zoom can also be set.</span>
<span class="c1">// config.minimumZ = 0</span>

<span class="c1">// Continues to show map tiles even beyond maximumZ</span>
<span class="c1">// config.overZoomMaximumZ = true</span>


<span class="c1">// Capacity of the cache in bytes. Once the cache is full it uses a LRU algorithm</span>
<span class="c1">// (Least Recently Used), that is, it removes the tiles last used a lot of time ago.</span>
<span class="c1">// Each time a tile is retrieved from the cache it is updated the value of last time used.</span>
<span class="c1">// Default value of the capacity is unlimited.</span>
<span class="n">config</span><span class="o">.</span><span class="n">capacity</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="c1">// 200 Megabytes</span>


</code></pre>

<p>If you need to use MapCache in different controllers, be sure to use the same values in the config to avoid issues.</p>
<h2 id='how-does-code-mapcache-code-work-behind-the-scenes' class='heading'>How does <code><a href="Classes/MapCache.html">MapCache</a></code> work behind the scenes</h2>

<p>If you need to build something on top of MapCache, read the following.</p>

<p>MapCache is a hack of <a href="https://developer.apple.com/documentation/mapkit">MapKit</a>, the map framework from Apple, used on their iOS, macOS, tvOS, and watchOS platforms.</p>
<h3 id='understanding-mapcache-bootstrap' class='heading'>Understanding MapCache bootstrap</h3>

<p>As explained in <em>How to use MapCache?</em> section, in order to bootstrap MapCache, we have to call this method:</p>
<pre class="highlight swift"><code><span class="n">map</span><span class="o">.</span><span class="nf">useCache</span><span class="p">(</span><span class="n">mapCache</span><span class="p">)</span>
</code></pre>

<p>Where map is an instance of <code>MKMapView</code>, the main class used to display a map with MapKit. What MapCache does through the <code>MKMapView+MapCache</code> extension is to add a new method <code>useCache</code> that tells <code>MKMapView</code> to display a new tile layer on top of the default layers. Because of this, while the tiles are loaded you may see  the tiles of the default Apple Maps.</p>

<p>This extension also adds a variable in the <code>MKMapView</code> to keep the cache config.</p>

<p>A layer in the map is called <em>overlay</em> in MapKit terminology. MapCache uses <a href="https://en.wikipedia.org/wiki/Tiled_web_map">tile based overlay</a> implemented in the class <code><a href="Classes/CachedTileOverlay.html">CachedTileOverlay</a></code>, which is a subclass of <a href="https://developer.apple.com/documentation/mapkit/mktileoverlay">MKTileOverlay</a>. </p>

<p>Overlays have associated <em>renderers</em> that are the actual classes that draw the content of an overlay on the screen. For example, there are rendererers for points, lines, polygons, and tiles. When <code>MapView</code> needs to display an overlay, it calls the delegate with the overlay it is going to render and you need to provide the renderer to use. In order to do that, We added a <code>mapCacheRenderer</code> method that returns the default <a href="https://developer.apple.com/documentation/mapkit/mktileoverlay">MKTileOverlayRenderer</a> when the class of the overlay passed as the argument is of the type <code><a href="Classes/CachedTileOverlay.html">CachedTileOverlay</a></code>. That is why we need to add this code on the application in the delegate of the map view (<code>MKMapViewDelegate</code>) :</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">ViewController</span> <span class="p">:</span> <span class="kt">MKMapViewDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">mapView</span><span class="p">(</span><span class="n">_</span> <span class="nv">mapView</span><span class="p">:</span> <span class="kt">MKMapView</span><span class="p">,</span> <span class="n">rendererFor</span> <span class="nv">overlay</span><span class="p">:</span> <span class="kt">MKOverlay</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">MKOverlayRenderer</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">mapView</span><span class="o">.</span><span class="nf">mapCacheRenderer</span><span class="p">(</span><span class="nv">forOverlay</span><span class="p">:</span> <span class="n">overlay</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='code-cachedtileoverlay-code-and-code-mapcacheprotocol-code' class='heading'><code><a href="Classes/CachedTileOverlay.html">CachedTileOverlay</a></code> and <code><a href="Protocols/MapCacheProtocol.html">MapCacheProtocol</a></code></h3>

<p>As mentioned earlier, <code><a href="Classes/CachedTileOverlay.html">CachedTileOverlay</a></code> is a tile based layer that is implemented as a subclass of <a href="https://developer.apple.com/documentation/mapkit/mktileoverlay">MKTileOverlay</a>. Basically, the only thing that it does is to override two methods of the parent class:</p>

<ol>
<li><p><code>func url(forTilePath path: MKTileOverlayPath) -&gt; URL</code>. The goal of this method is to return the URL of the tile. We need to overwrite it to be able to use the tile server of our preference.    </p></li>
<li><p><code>func loadTile(at path: MKTileOverlayPath, result: @escaping (Data?, Error?) -&gt; Void)</code>. This method is the one that returns the actual Tile.</p></li>
</ol>

<p>If you take a look at the <a href="https://github.com/merlos/MapCache/blob/master/MapCache/Classes/CachedTileOverlay.swift">implementation of <code><a href="Classes/CachedTileOverlay.html">CachedTileOverlay</a></code></a>, you will notice that it only forwards the request to the method with the same signature of a variable called <code>mapCache</code> which is an instance of a class that implements  <code><a href="Protocols/MapCacheProtocol.html">MapCacheProtocol</a></code> </p>
<pre class="highlight swift"><code><span class="k">override</span> <span class="kd">public</span> <span class="kd">func</span> <span class="nf">url</span><span class="p">(</span><span class="n">forTilePath</span> <span class="nv">path</span><span class="p">:</span> <span class="kt">MKTileOverlayPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">URL</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">mapCache</span><span class="o">.</span><span class="nf">url</span><span class="p">(</span><span class="nv">forTilePath</span><span class="p">:</span> <span class="n">path</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>The <a href="https://github.com/merlos/MapCache/blob/master/MapCache/Classes/MapCacheProtocol.swift"><code>MapCacheProtocol definition</code></a> is pretty simple, as it just requires to have a config variable instance of a <code><a href="Structs/MapCacheConfig.html">MapCacheConfig</a></code> and an implementation of the two methods that are called from <code><a href="Classes/CachedTileOverlay.html">CachedTileOverlay</a></code>:</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">MapCacheProtocol</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">config</span><span class="p">:</span> <span class="kt">MapCacheConfig</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">url</span><span class="p">(</span><span class="n">forTilePath</span> <span class="nv">path</span><span class="p">:</span> <span class="kt">MKTileOverlayPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">URL</span>

    <span class="kd">func</span> <span class="nf">loadTile</span><span class="p">(</span><span class="n">at</span> <span class="nv">path</span><span class="p">:</span> <span class="kt">MKTileOverlayPath</span><span class="p">,</span> <span class="nv">result</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">Data</span><span class="p">?,</span> <span class="kt">Error</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span>

<span class="p">}</span>
</code></pre>

<p>If you need to create a custom implementation of the cache, you need to create a class that implements this protocol and initialize the cache using  <code>map.useCache(myCustomCacheImplementationInstance)</code>. The implementation provided by the library is on the <code><a href="Classes/MapCache.html">MapCache</a></code> class.</p>

<p>Something that may also be useful is the <code><a href="Classes/DiskCache.html">DiskCache</a></code> class.</p>

<p>If you need further information you can take a look at </p>
<h3 id='a-href-http-www-merlos-org-mapcache-reference-documentation-of-mapcache-a' class='heading'><a href="http://www.merlos.org/MapCache/">Reference documentation of MapCache</a>.</h3>
<h2 id='development' class='heading'>Development</h2>

<p>Clone the repo</p>
<pre class="highlight shell"><code>git clone https://github.com/merlos/MapCache
</code></pre>

<p>With Xcode Open the file <code>Example/MapCache.xcworkspace</code></p>

<p>To check if the pod is ready to be released run the command in the root folder folder </p>
<pre class="highlight shell"><code>pod lib lint MapCache.podspec
</code></pre>
<h3 id='generate-the-documentation' class='heading'>Generate the documentation</h3>

<p>This project uses <a href="https://github.com/realm/jazzy">jazzy</a> for generating the <a href="http://www.merlos.org/MapCache/">reference documentation</a>)</p>

<p>To install jazzt</p>
<pre class="highlight plaintext"><code>gem install jazzy --verbose
</code></pre>

<p>In the root folder of the project run</p>
<pre class="highlight shell"><code>jazzy
</code></pre>
<h2 id='you-may-also-like' class='heading'>You may also like</h2>

<ul>
<li><strong><a href="https://github.com/merlos/iOS-Open-GPX-Tracker">Open GPX Tracker</a></strong>. A free source iOS App to create <a href="https://en.wikipedia.org/wiki/GPS_Exchange_Format">GPX</a> tracks</li>
<li><strong><a href="https://github.com/vincentneo/CoreGPX">Core GPX</a></strong> A swift library for managing GPX files by <a href="https://github.com/vincentneo">Vincent Neo</a></li>
</ul>
<h2 id='license-mit' class='heading'>License - MIT</h2>

<p>Copyright &copy; 2019-2020 Juan M. Merlos <a href="http://twitter.com/merlos">@merlos</a> and contributors.</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &ldquo;Software&rdquo;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED &ldquo;AS IS&rdquo;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2023 <a class="link" href="https://github.com/merlos/MapCache" target="_blank" rel="external noopener">merlos</a>. All rights reserved. (Last updated: 2023-05-27)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
